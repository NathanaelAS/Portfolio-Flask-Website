{% extends "base.html" %}

{% block title %}Calendar Event List{% endblock %}

{% block styles %}
    <style>
        /* For a Google Sheets-like table */
        .spreadsheet-table {
            border-collapse: collapse; /* Merges cell borders */
            font-family: Arial, sans-serif; /* A clean, universal font */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Subtle shadow around the table */
        }

        /* Make headers and cells flat and clean */
        .spreadsheet-table thead th, .spreadsheet-table tbody td {
            border: 1px solid #dadce0; /* The clean, light gray border of Google Sheets */
            padding: 8px 12px;
        }

        /* Style the header row */
        .spreadsheet-table thead th {
            background-color: #f8f9fa; /* A very light gray background */
            font-weight: bold;
            color: #5f6368; /* Google's a bit-darker gray for headers */
        }

        /* Zebra striping for rows */
        .spreadsheet-table tbody tr:nth-child(even) {
            background-color: #fcfcfc; /* A very slight difference for even rows */
        }

        /* No rounded corners, for a spreadsheet feel */
        .spreadsheet-table, .spreadsheet-table thead, .spreadsheet-table tbody {
            border-radius: 0;
        }
        @keyframes fadeIn{
            from { opacity: 0;}
            to { opacity: 1;}
        }
        .fade-in{
            opacity: 0;
            animation: fadeIn 1.2s ease-in forwards;
        }
        .sort {
            cursor: pointer;
            text-decoration: none;
        }

        /* Adds a small down arrow when sorting descending */
        .sort.desc::after {
            content: " ▼";
        }

        /* Adds a small up arrow when sorting ascending */
        .sort.asc::after {
            content: " ▲";
        }
    </style>
{% endblock %}

{% block content %}
    <div class='py-3 bg-light'>
        <h1 class="text-center">Calendar Event List</h1>
    </div>

    <div class="fade-in">
        <div id="event-table-container">
            <table class="table table-striped table-hover caption-top spreadsheet-table mb-4">
                <caption class="text-center fs-4 fw-bold mb-3 mt-3">Event List</caption>
                <thead>
                    <tr>
                        <th class="sort" data-sort="title">Title</th>
                        <th class="sort" data-sort="start_date">Start Date</th>
                        <th class="sort" data-sort="end_date">End Date</th>
                        <th class="sort" data-sort="all_day">All Day?</th>
                        <th class="sort" data-sort="start_time">Start Time</th>
                        <th class="sort" data-sort="end_time">End Time</th>
                        <th class="sort" data-sort="description">Description</th>
                        <th class="sort" data-sort="color">Color</th>
                    </tr>
                </thead>
                <tbody class="list">
                    {% for event in events %}
                    <tr>
                        <td class="title">{{ event.title }}</td>
                        <td class="start_date">{{ event.start_date }}</td>
                        <td class="end_date">{{ event.end_date }}</td>
                        <td class="all_day">{{ event.all_day }}</td>
                        <td class="start_time">{{ event.start_time }}</td>
                        <td class="end_time">{{ event.end_time }}</td>
                        <td class="description">{{ event.description }}</td>
                        <td style="{% if event.color %}background-color: {{ event.color }};{% endif %}" class="color">{{ event.color if event.color else 'No Color' }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <hr>

        <div class="d-flex justify-content-center">
            <button class="btn btn-secondary mt-4 shadow" id="back-to-calendar-btn">
                Back to Calendar
            </button>
        </div>
    </div>

    
    
{% endblock %}

{% block scripts %}
    <script src="//cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
    <script>
        const schedulingCalendarUrl = "{{ url_for('projects.schedulingCalendar_page') }}";
        document.getElementById('back-to-calendar-btn').addEventListener('click', function(){
            window.location.href = schedulingCalendarUrl;
        });

        var eventList = new List('event-table-container', {
            valueNames: ['title', 'start_date', 'end_date', 'all_day', 'start_time', 'end_time', 'description', 'color']
        });
    </script>
{% endblock %}