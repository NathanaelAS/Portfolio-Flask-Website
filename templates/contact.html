{% extends "base.html" %}


{% block title %}Contact{% endblock %}

{% block styles %}
	<style>
		/* Custom styles for the button with directional fill and arrow effect */
		.my-custom-fill-button {
			position: relative; /* Needed for absolute positioning of ::before and ::after */
			overflow: hidden;   /* Ensures the fill and arrow are clipped */
			padding-right: 2.5em; /* Initial space for the arrow */
			z-index: 1;         /* Ensures button content is above the ::before fill */

			/* Initial state for outline button */
			background-color: transparent; 
			border-color: var(--bs-success);
			color: var(--bs-success); 

			/* Explicit transition for button's own properties */
			/* Ensure background-color transition is listed here as well */
			transition: color 0.3s ease, border-color 0.3s ease, background-color 0.3s ease, padding 0.3s ease; 
		}

		/* ::before pseudo-element for the left-to-right fill effect */
		.my-custom-fill-button::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			width: 0; /* Starts at 0 width (invisible) */
			height: 100%;
			background-color: var(--bs-success); /* The green fill color */
			z-index: -1; /* Places the fill behind the button's text and ::after arrow */
			transition: width 0.3s ease-out; /* Smooth transition for the width animation */
		}

		/* ::after pseudo-element for the arrow effect */
		.my-custom-fill-button::after {
			content: ' ->'; /* The arrow character and leading space */
			position: absolute;
			right: 0.25em; /* Initial position of the arrow */
			top: 50%;
			transform: translateY(-50%) translateX(10px); /* Move slightly right and center vertically */
			opacity: 0; /* Initially hidden */
			transition: transform 0.3s ease, opacity 0.3s ease; /* Smooth transition for arrow movement and fade */
			font-weight: bold; /* Make the arrow stand out */
			color: inherit; /* Inherit button's text color (will change on hover with the button text) */
			z-index: 2; /* Ensure the arrow is above the fill */
		}

		/* Hover state for the button itself (CRUCIAL OVERRIDES) */
		.my-custom-fill-button:hover {
			/* Force the main button's background to remain transparent on hover. */
			/* This is the key to preventing the instant fill from Bootstrap's default. */
			background-color: transparent !important; 
			
			/* Keep other outline button hover styles consistent */
			border-color: var(--bs-success); /* Border stays green */
			color: var(--bs-white);         /* Text color becomes white */
			padding-right: 1.5em;           /* Adjust padding */
		}

		/* Hover state for the ::before fill effect */
		.my-custom-fill-button:hover::before {
			width: 100%; /* Fills to 100% width on hover */
		}

		/* Hover state for the ::after arrow effect */
		.my-custom-fill-button:hover::after {
			transform: translateY(-50%) translateX(0); /* Slide the arrow to its final position */
			opacity: 1; /* Make the arrow visible */
		}
	</style>
{% endblock %}

{% block content %}
	<div class='py-3 bg-light text-center'>
		<h1 class='mt-3'>Contact Me</h1>
	</div>
	
	<div class="container">
		<div class="row">
			<div class="col-md-6">
				<!-- Centered Contact Card -->
				<div class="d-flex justify-content-center mt-5">
					<div class="card text-center shadow-lg" style="width: 18rem;">
						<img src="{{ url_for('static', filename='images/profileplaceholder.jpg') }}"
							class="card-img-top rounded-circle mx-auto mt-4"
							alt="Profile Picture"
							style="width: 150px; height: 150px; object-fit: cover;">
						<div class="card-body">
						<h5 class="card-title">Nathanael Spear</h5>
						<p class="card-text">Check out my Profile on LinkedIn!</p>
						<a href="https://www.linkedin.com/in/nathanael-spear-577b85218" target="_blank" class="btn btn-outline-secondary">LinkedIn</a>
						</div>
					</div>
				</div>
			</div>

			<div class="col-md-6">
				<div class="mx-auto" style="max-width: 400px;">
					<h3 class="text-center mt-5 mb-4">Email</h3>
					<form class="needs-validation" id="emailForm" novalidate>
						<input type="text" class="form-control" id="name" placeholder="Name:" name="name" required>
						<input type="email" class="form-control" id="email" placeholder="Email:" name="email" required>
						<textarea class="form-control mb-3" rows="4" id="message" placeholder="Message:" name="text" required></textarea>
						<div class="text-end">
							<button type="submit" class="btn btn-outline-success my-custom-fill-button" id="emailSubmitBtn">Send Email</button>
						</div>
					</form>
				</div>
			</div>

		</div>
	</div>
{% endblock %}

{% block scripts %}
	<script>
		const myForm = document.getElementById('emailForm');

		let formSubmittedOnce = false
		
		myForm.addEventListener('submit', function(event) {
			if (!myForm.checkValidity()) {
				event.preventDefault();
				event.stopPropagation();	
			} else {
				alert('Form Submitted Successfully!');
				myForm.reset();
			}

			myForm.classList.add('was-validated')
			formSubmittedOnce = true;
			if (myForm.checkValidity() && event.type === 'submit') {
				myForm.classList.remove('was-validated')
				formSubmittedOnce = false;
			}
		})

		document.querySelectorAll('input[required], textarea[required]').forEach(element => {
			element.addEventListener('blur', function() {
				if (formSubmittedOnce) {
					myForm.classList.add('was-validated')
				}
			})
			element.addEventListener('input', function() {
				if (formSubmittedOnce) {
					myForm.classList.add('was-validated')
				}
			})
		})
	</script>
{% endblock %}
	
